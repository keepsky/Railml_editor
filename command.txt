
======================
code=corner인 track에서 track name을 표시하는 부분은 trackBegin~cornerPos 과 cornerPos~trackEnd 구간중에 길이가 긴 구간에 표시하도록 수정해줘
======================
<route>에 아래 태그를 추가하고 railml에서 <route><releaseGroup><trackSectionRef>의 하위 태그로 사용자가 입력한 list를 추가되도록 구현
Release Section : list 형태로 여러줄에 걸쳐서 입력 받을수 있도록 (+) 버튼을 누르면 아래의 속성들을 입력할수 있도록 구현
	ref : track.id
	flankProtection : (true, false) list에서 선택
======================
좌측 탐색창에 route를 추가
툴바에서 route 버튼을 누르면 탐색창에 신규 route를 추가하고 해당 route id를 선택하면 속성창에서 아래의 값들을 입력할수 있도록 수정해줘
아래 (1)~(11)은 railml에서 <infrastructure><routes><route>의 속성으로 추가되고
아래 (12), (13)은 railml에서 <infrastructure><routes><route>의 하위 태그로 사용자가 입력한 list를 추가되도록 구현
(1) id : 자동 생성 (R001, R002, ...)
(2) name (string) : 사용자 입력
(3) code (string) : 사용자 입력
(4) description (string) : 사용자 입력
(5) approachPointRef : track.id
(6) entryRef : signal.id
(7) exitRef : signal.id
(8) overlapEndRef : track.id
(9) proceedSpeed : R,YY,Y,YG,G list에서 선택 (entryRef의 signal type에 따라 달라짐)
(10) releaseTriggerHead (boolean) : true, false
(11) releaseTriggerRef : Reference to the trigger point for the overlap release timer
(12) <switchAndPosition> : list 형태로 여러줄에 걸쳐서 입력 받을수 있도록 (+) 버튼을 누르면 아래의 속성들을 입력할수 있도록 구현
	switchRef : switch.id
	switchPosition : (normal, reverse) list에서 선택
(13) <overlapSwitchAndPosition> : list 형태로 여러줄에 걸쳐서 입력 받을수 있도록 (+) 버튼을 누르면 아래의 속성들을 입력할수 있도록 구현
	switchRef : switch.id
	switchPosition : (normal, reverse) list에서 선택
======================
현재 switch(point)가 생성되는 아래 (1), (2) 두 경우에 대해서 각각에 대해서 조건을 확인하고 수정해줘
(1) 하나의 <trackEnd>와 두개 이상의 <trackBegin> 좌표가 겹치는 경우
(1-a) switch 좌표 밑에 "principle track 선택" 제목의 팝업 메뉴를 띄우고 <trackBegin>이 속한 track 들의 id(name) 형태로 모두 보여주고 사용자가 마우스로 선택 
(1-b) 미선택시 마지막 track 이동은 취소하여 원위치로 복귀
(1-c) 하나의 <trackEnd>가 속한 track을 entering track으로 정의하고, 1-a에서 사용자가 선택한 track이 principle track이 되고 나머지들는 diverging track으로 정의
(1-d) entering track의 <trackEnd>와 principle track의 <trackBegin>은 각각 하위에 <connection>태그로 연결
(1-e) principle track 하위에 <connections><switch> 태그를 추가하고 switch의 pos 속성값은 0으로 설정(trackBegin 의미), switch의 trackContinueCourse 속성과 normalPosition 속성은 속성윈도우에서 (straight, left, right, other) 중에 하나를 선택할수 있게 수정(기본 값은 straight) 
(1-f) <switch> 하위의 <connection> 태그에는 diverging track들에 대해서 ref속성값을 추가하고 orientation 속성값은 "outgoing"으로 설정하고, course 속성은 속성 윈도우에서 (straight, left, right) 중에 하나를 선택할수 있게 수정

(2) 하나의 <trackBegin>과 두개 이상의 <trackEnd> 좌표가 겹치는 경우
(2-a) switch 좌표 밑에 "principle track 선택" 제목의 팝업 메뉴를 띄우고 <trackEnd>가 속한 track 들의 id(name) 형태로 모두 보여주고 사용자가 마우스 선택
(2-b) 미선택시 마지막 track 이동은 취소하여 원위치로 복귀
(2-c) 하나의 <trackBegin>이 속한 track을 entering track으로 정의하고 2-a에서 사용자가 선택한 track이 principle track이 되고 나머지들는 diverging track으로 정의
(2-d) entering track의 <trackBegin>과 principle track의 <trackEnd>은 각각 하위에 <connection>태그로 연결
(2-e) entering track 하위에 <connections><switch> 태그를 추가하고, switch의 pos 속성값은 0으로 설정(trackBegin 의미), switch의 trackContinueCourse 속성과 normalPosition 속성은 속성윈도우에서 (straight, left, right, other) 중에 하나를 선택할수 있게 수정(기본 값은 straight)
(2-f) <switch> 하위의 <connection> 태그에는 diverging track들에 대해서 ref속성값을 추가하고 orientation 속성값은 "incoming"으로 설정하고, course 속성은 속성 윈도우에서 (straight, left, right) 중에 하나를 선택할수 있게 수정
======================
track에 hasSwitch라는 boolean 속성을 추가하고 선택할수 있도록 추가하고 hasSwitch가 enable 인경우 해당 track에 trackContinueCourse라는 속성을 표시하고 아래의 값들에서 선택할수 있도록 추가해줘
straight, 
left, 
right, 
other
사용자가 track의 좌표를 이동함에 따라서 track이 switch를 가질수 없는 조건이 되면 hasSwitch는 자동으로 diable 값으로 변경되도록 반영해줘
======================
signal, track에 대해서 마우스 선택하여 복사, 붙여넣기 기능을 추가하고
여러개의 요소를 다중 선택하는 경우 공통 속성을 일괄 편집할수 있도록 수정해줘
여러개의 요소를 다중 선택해서 del키를 누르면 해당 요소들을 삭제하는 기능도 추가해줘
======================
track을 마우스 우클릭해서 메뉴를 표시하고 좌우반전, 상하반전 메뉴를 만들어줘
상하반전는 code=corner 인 track만 메뉴를 보여주고 각 점의 좌표가 상하 대칭 반전 되도록 변경해주고
좌우반전은 모든 code에 대해서 메뉴를 보여주고 각 점의 좌표가 좌우 대칭 반전 되도록 변경하는 코드를 적용해줘
======================
현재 curved track이라고 정의해서 id를 PT001, PT002 형식으로 정의한 track을 일반적인 track과 동일하게  T001, T002로 id를 만들고 track의 code 속성에 "corner"라고 정의하고, trackBegin 하위에 sehwa:screenpos 태그에서 mx, my 속성은 tracktopology 하위에 sehwa:cornerPos 태그를 만들고 x, y로 변경하도록 수정해줘
그리고 그외 일반적인 track의 경우 code 속성값은 "plain"으로 정의하도록 수정해줘
======================
trackEnd에 switch가 있고 다른 2개의 trackBegin이 연결되는 경우 아래와 같은 railml 코드가 생성되어야 합니다. switch 태그에는 ref 속성이 없기 때문에 switch 하위에 connection 태그의 ref 속성을 이용합니다. 아래 예제는 1번 트랙에서 2,3번 트랙으로 switch를 통해서 분기되는 경우를 나타낸것입니다.
<trackEnd id="te_1" pos="100">
            <connections>
              <switch id="sw_01">
                <connection id="conn_1_to_2" ref="tb_2"/>
                <connection id="conn_1_to_3" ref="tb_3"/>
              </switch>
            </connections>
          </trackEnd>
======================
switch가 아닌 일반 track 두개가 연결될때 현재 구현은 tracktopology->connections->connection 태그를 사용하고 있는데, 이것을 수정해서 연결되는 지점의 trackbegin 또는 trackend 태그 하위에 connection 태그가 위치하도록 수정해줘
======================
trackbegin, trackend에 있는 X, Y 속성 대신에 하위에 sehwa:screenPos 태그를 만들고 x, y 속성에 좌표를 저장하도록 수정해줘
======================
ptag의 좌표는 기본적으로 현재의 기본값으로 사용하고 이미지를 마우스로 선택해서 위치를 이동할수 있도록 수정하고 만약 위치가 변경되는 경우 바뀐 좌표는 sehwa:screenpos mx, my에 좌표를 저장하고, 이동한 좌표 mx, my가 pos x,y와 동일하면 sehwa:scrrenpos 태그는 다시 제거 하도록 수정해줘
======================
현재 connections 태그를 trackend 속성 하위에 속해 있는데 tracktopology 하위에 속하도록 수정하고 connections->switch 태그에는 pos 속성을 이용해서 switch(point)의 상대 위치를 저장하도록 수정해줘
======================
신호기에 대해서 name을 아래 규칙으로 표시하도록 수정해줘
signal direction=up인 경우 이미지 좌측에 이미지 높이와 중앙 정렬되도록 표시하고
signal direction=down인 경우 이미지 우측에 이미지 높이와 중앙 정렬되도록 표시하고
name 표시할때 폰크 크기는 10px 정도로 설정
======================
point가 만들어지면 아래의 내용을 수행하는 기능 추가
image 폴더의 ptag.svg 이미지를 이용해서 point의 좌표 밑에 표시하고 (Y축 +5px )
ptag.svg 이미지의 우측 라운드 박스에 point name을 표시
======================
ctrl + 마우스 휠 up/down으로 전체 요소를 확대하거나 축소하는 기능을 추가해줘
======================
track에 아래 3개 속성 추가하고 속성창에서 수정할수 있도록 수정해줘
description : string 타입으로 사용자가 내용 입력
type : list box로 mainTrack, secondaryTrack, connectingTrack, sidingTrack, stationTrack 을 선택
mainDir : list box로 up, down, none 선택
그리고 signal에 아래 속성 추가하고 속성창에서 수정할수 있도록 수정해줘
type : list box로 main, distant, repeater, shunting 을 선택
function : list box로 exit, home, blocking 을 선택
======================
signal direction=down인 경우 signal의 좌표 기준은 우측 끝지점으로 수정하여 반영
signal을 track에 위 또는 아래에 표시될때 현재보다 2px 정도 간격을 두도록 수정
======================

signal 속성의 direction은 up, down을 선택하는 리스트박스 형태로 수정
현재 signal 아이콘을 마우스로 드래그 하면 자동으로 좌우 반전이 되는 기능 삭제하고 선택된 direction에 따라서만 signal 이미지가 좌우 반전이 되도록 수정
direction=up인 경우 signal.svg 이미지 그대로 사용해서 좌표값이 trackBegin 지점 근처에 있으면 signal이 trackBegin 위쪽에 위치시켜서 해당 track과 바인딩 되도록 수정
direction=down인 경우 signal.svg 좌우 반전 형태로 사용해서 좌표값이 trackEnd 지점 근처에 있으면 signal이 trackEnd 아래쪽에 위치시켜서 해당 track과 바인딩 되도록 수정 

======================
toolbar의 curved track 버튼의 이미지를 image 폴더의 point.svg 이미지로 변경
toolbar에 있는 선로전환기 아이콘은 삭제하고
track을 겹쳐서 생성된 switch를 선로전환기로 정의하고 좌측 요소 tree에 switch를 추가하고 switch를 선택하면 좌측 속성영역에 switch의 속성들을 표시하도록 수정해줘
switch의 경우 id는 현재대로 자동으로 생성하고 name 속성을 switch -> additionalName -> name에 추가하여 입력할수 있도록 수정
======================
signal 속성에 dir 속성을 추가하고 up, down으로 설정할수 있도록 수정해줘
up인경우(default) signal.svg 이미지 그대로 사용해서 track의 위쪽에 위치하도록 수정하고
down인경우 signal.svg 이미지 좌우 반전 형태로 사용해서 track의 아래쪽에 위치하도록 수정해줘

======================
signal을 추가했는데 관련 속성이 railml에 추가되지 않고 있는데 아래 속성을 railml에 추가되도록 수정해줘
track -> ocsElements -> signals -> signal -> id 속성을 추가
track -> ocsElements -> signals -> signal -> additionalName -> name 속성을 추가

======================

svg 폴더에 있는 signal.svg 파일을 이용해서 toolbar의 signal 버튼을 변경하고, 버튼을 누르면 signal을 추가할수 있도록 수정해줘
signal을 마우스로 이동하다가 trackBegin의 위쪽 5px 지점에 위치하면 signal이 track 위 해당 지점에 위치하도록 수정하고
signal을 마우스로 이동하다가 trackBegin의 아래쪽 5px 지점에 위치하면 signal 이미지를 좌우 반전 형태로 변경해서 signal이 track 아래 해당 지점에 위치하도록 수정
======================

railml 2.5에 따르면 signal은 track에 종속되어 track -> ocsElements -> signals -> signal 형태로 구성되어야 한다.
따라서 signal을 마우스로 드래그 하다가 trackBegin 지점에 위치하면 자동으로 바인딩되도록 수정하고 해당 track의 ocsElements 태그 하위에 signal 태그를 추가하도록 수정해줘 
======================

좌측 속성영역을 아래와 같이 수정해줘
1. 테이블 형태로 변경하고 속성, 값 형태로 구성하도록 수정
2. 좌측 상단에 별도 창을 만들고 현재 생성된 모든 요소를 tree 형태로 구성
   a. tree 상위 구조는 track, signal, point로 구성
   b. 각 상위 item을 선택하면 해당 item에 속한 요소들을 나열하고 선택할수 있도록 표시되도록 수정
3. track의 경우 id는 현재대로 자동으로 생성하고 name 속성을 직접 수정할수 있도록 수정
4. signal의 경우 id는 현재대로 자동으로 생성하고 name 속성을 추가하여 입력할수 있도록 수정
5. point의 경우 id는 현재대로 자동으로 생성하고 name 속성을 추가하여 입력할수 있도록 수정
======================

새로운 toolbar UI 요소를 정의 하려고 합니다. track의 종류인데 track.svg 두개가 이어진 형태이고 마우스로 선택해서 이동할수 있는 지점이 3개가 있어서 각 앵커 포인트는 Begin, Mid, End로 정의하고 mid 좌표는 trackBegin 태그 안에 <sehwa:screenPos mx="170" my="260" /> 형태로 추가한다. 하지만 논리적으로 railml로 표현할때는 track과 동일하다.

======================
TCB(track circuit border) UI 요소를 10px의 검은 점으로 toolbar에 추가하고 해당 요소를 선택해서 마우스로 track 위에 위치시키면 아래의 railml 구문에 따라서 trainDetectionElements 태그에 trackCircuitBorder 태그를 추가하고 tvdSections 태그 하위에 tvdSection 을 아래 예제와 같이 추가하도록 수정해줘
      <track id="track_1" length="1000">
        <trackTopology>...</trackTopology>
        <trainDetectionElements>
          <trackCircuitBorder id="tcb_start" pos="100" dir="up" />
          <trackCircuitBorder id="tcb_end" pos="500" dir="down" />
        </trainDetectionElements>
      </track>
    <tvdSections>
      <tvdSection id="tvd_1T" name="1T">
        <border ref="tcb_start" />
        <border ref="tcb_end" />
      </tvdSection>
    </tvdSections>

그리고 switch를 포함하는 track의 경우 3개의 track에 TCB(track circuit border)를 위치시키면 아래의 railml 구문과 같이 선로전환기(switch)를 공유하는 3개의 track이 하나의 tvdSection이 되도록 수정해줘 
    <tracks>
      <track id="track_A" length="100">
        <trackTopology>
           <trackEnd id="tA_end" pos="100"><connections><switch id="sw1" ... /></connections></trackEnd>
        </trackTopology>
        <trainDetectionElements>
           <trackCircuitBorder id="border_1" pos="80" />
        </trainDetectionElements>
      </track>

      <track id="track_B" length="200">
        <trackTopology>...</trackTopology>
        <trainDetectionElements>
           <trackCircuitBorder id="border_2" pos="50" />
        </trainDetectionElements>
      </track>

      <track id="track_C" length="200">
        <trackTopology>...</trackTopology>
        <trainDetectionElements>
           <trackCircuitBorder id="border_3" pos="50" />
        </trainDetectionElements>
      </track>
    </tracks>
    <tvdSections>
      <tvdSection id="tvd_Switch_21T" name="21T">
        <border ref="border_1" /> <border ref="border_2" /> <border ref="border_3" /> </tvdSection>
    </tvdSections>
=================================
하나의 trackEnd에 다른 trackBegin이 2개 이상 연결되는 경우 아래의 switch 태그로 표현하도록 수정해줘
<trackEnd id="t1_e" pos="100">
    <connections>
       <switch id="sw1" ref="t2_b">
           <connection id="conn_sw1_div" ref="t3_b" orientation="outgoing" course="right" />
       </switch>
   </connections>
</trackEnd>

          <trackBegin id="t2_b" pos="0">
            <connections>
              <connection id="conn_t2_t1" ref="t1_e" />
            </connections>
          </trackBegin>
          <trackBegin id="t3_b" pos="0">
            <connections>
              <connection id="conn_t3_t1" ref="t1_e" />
            </connections>
          </trackBegin>

===============================

궤도회로의 시작은 <trackBegin>으로 표현하고, 궤도회로의 끝은 <trackEnd>로 표현하도록 수정하고 궤도회로 요소의 시작, 끝 점을 마우스로 선택하여 드래그 하면 좌표가 변경되도록 수정해줘
그리고 실제 궤도회로 시작, 끝의 좌표는 아래와 같이 any 태그를 이용해서 x, y 좌표를 저장하도록 수정해줘
<any><sehwa:screenPos x="100" y="300" xmlns:sehwa="..." /></any>


<trackBegin>, <trackEnd>는 pos 속성을 이용해서 표시할 x 좌표를 저장하는데 y 좌표의 경우 어떻게 표시하지?

캔버스에 표시되는 모든 요소는 마우스 드래그하여 이동되는 단위를 10px로 변경
모든 요소를 선택하여 delete 키를 누르면 요소를 삭제
마우스로 영역을 드래그 하여 다중 요소 선택이 가능하고 이동, 삭제 가능하도록 수정
마우스 휠 클릭, 드래그 이용하여 전제 요소의 좌표를 이동할수 있도록 수정